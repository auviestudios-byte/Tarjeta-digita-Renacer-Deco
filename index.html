<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Catálogo | Johanna M. Cuesta</title>
    
    <link rel="icon" type="image/png" href="https://i.postimg.cc/mDxyknVV/Foto-portada.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary-lila: #8e44ad; 
            --dark-gray: #2d3436; 
            --whatsapp-green: #25d366;
            --fb-blue: #1877F2;
            --ig-pink: #E1306C;
        }

        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; background-color: #ffffff;
            display: flex; justify-content: center;
            min-height: 100vh; position: relative; overflow-x: hidden;
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://i.postimg.cc/8csTHrHX/ondas_lineas_gris_10.png');
            background-size: cover; background-position: center; opacity: 0.25; z-index: -1;
        }

        .main-content { width: 100%; max-width: 450px; min-height: 100vh; padding: 10px 0; }
        header { text-align: center; padding: 30px 20px 20px; }
        
        .logo-placeholder {
            width: 130px; height: 130px; background: #fff; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; margin: 0 auto 15px;
            border: 3px solid var(--primary-lila); box-shadow: 0 4px 15px rgba(142, 68, 173, 0.2);
            overflow: hidden;
        }
        .logo-placeholder img { width: 100%; height: 100%; object-fit: cover; }

        h1 { margin: 10px 0 5px; font-size: 1.6rem; color: var(--dark-gray); }
        .cargo { color: #666; font-size: 1.1rem; margin-bottom: 10px; }
        .tagline { font-size: 1rem; color: #333; margin: 10px auto 20px; max-width: 85%; line-height: 1.4; font-weight: 500; }

        .social-links { display: flex; justify-content: center; gap: 25px; margin-bottom: 25px; }
        .social-links a i { font-size: 2rem; }
        .social-links a i.fa-whatsapp { color: var(--whatsapp-green); }
        .social-links a i.fa-instagram { color: var(--ig-pink); }
        .social-links a i.fa-facebook { color: var(--fb-blue); }

        .subtitle { color: #333; font-weight: 600; text-align: center; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }

        .category-btn {
            background-color: var(--dark-gray);
            color: white; padding: 22px; margin: 0 20px 15px; border-radius: 12px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .video-btn { background-color: var(--primary-lila); }

        .btn-back { 
            background: var(--dark-gray); color: white; border: 2px solid var(--primary-lila); 
            padding: 15px; border-radius: 10px; width: calc(100% - 40px); font-weight: bold; 
            margin: 0 20px 20px; cursor: pointer;
        }

        .page { display: none; padding-bottom: 40px; }
        .active { display: block; animation: fadeIn 0.3s ease; }

        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 0 20px; }
        .product-card { background: rgba(255,255,255,0.9); border-radius: 10px; padding: 10px; text-align: center; border: 1px solid #ddd; }
        .product-img { width: 100%; aspect-ratio: 1/1; background: #f9f9f9; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .product-img img { width: 100%; height: 100%; object-fit: contain; }
        .play-icon { position: absolute; color: white; font-size: 2.5rem; opacity: 0.9; text-shadow: 0 0 10px rgba(0,0,0,0.5); }
        .btn-buy { background: var(--primary-lila); color: white; border: none; padding: 12px 5px; border-radius: 6px; width: 100%; font-weight: bold; cursor: pointer; }

        /* --- VISOR REPARADO --- */
        #media-viewer {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; flex-direction: column;
        }
        .viewer-body { flex: 1; width: 100%; position: relative; display: flex; align-items: center; justify-content: center; }
        
        /* Esta capa es la que permite el swipe sobre el video sin bloquearlo */
        #touch-overlay { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            z-index: 10002; background: transparent; touch-action: none;
        }

        #video-iframe { width: 100%; height: 75vh; border: none; z-index: 10000; display: none; }
        #full-image { max-width: 100%; max-height: 85%; object-fit: contain; display: none; }
        .close-viewer { position: absolute; top: 25px; right: 20px; color: white; font-size: 30px; z-index: 10005; background: rgba(142, 68, 173, 0.8); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .viewer-footer { padding: 20px 0 40px; width: 100%; text-align: center; color: white; z-index: 10003; }
        .dots-container { display: flex; justify-content: center; gap: 8px; margin-top: 15px; }
        .dot { width: 8px; height: 8px; background: #444; border-radius: 50%; }
        .dot.active { background: var(--primary-lila); width: 20px; border-radius: 10px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        footer { text-align: center; padding: 20px; color: #333; font-size: 0.8rem; font-weight: bold; }
    </style>
</head>
<body>

<div class="main-content">
    <div id="home" class="page active">
        <header>
            <img src="https://i.postimg.cc/kMc2h831/Logo__Blanco-violeta.png" style="max-width: 200px; margin-bottom: 15px;">
            <div class="logo-placeholder"><img src="https://i.postimg.cc/mDxyknVV/Foto-portada.png"></div>
            <h1>Johanna M. Cuesta</h1>
            <p class="cargo">Directora Comercial</p>
            <p class="tagline">Brindamos calidad, confianza y estilo en cada proyecto.</p>
            <div class="social-links">
                <a href="https://wa.me/573108814049" target="_blank"><i class="fab fa-whatsapp"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
            </div>
            <p class="subtitle">Catálogo de Servicios</p>
        </header>

        <div class="category-btn" onclick="goNav('submenu')"><span>CORTINAS DE LUJO</span><i class="fas fa-chevron-right"></i></div>
        <div class="category-btn" onclick="goNav('category', 'Muebles', 'Muebles de Lujo')"><span>MUEBLES DE LUJO</span><i class="fas fa-chevron-right"></i></div>
        <div class="category-btn" onclick="goNav('category', 'Mobiliario', 'Divisiones para baños')"><span>DIVISIONES PARA BAÑOS</span><i class="fas fa-chevron-right"></i></div>
        <div class="category-btn video-btn" onclick="goNav('category', 'Videos', 'Nuestros videos')">
            <span><i class="fas fa-play-circle"></i> NUESTROS VIDEOS</span><i class="fas fa-chevron-right"></i>
        </div>
        <footer>@ auviestudios - todos los derechos reservados 2026</footer>
    </div>

    <div id="submenu-view" class="page">
        <button class="btn-back" onclick="history.back()">← VOLVER AL MENÚ PRINCIPAL</button>
        <h2 style="text-align:center; color: var(--primary-lila);">TIPO DE CORTINA</h2>
        <div class="category-btn" onclick="goNav('category', 'PanelJapones', 'Panel Japonés')" style="background:white; color:black; border:1px solid var(--primary-lila);"><span>Panel Japonés</span></div>
        <div class="category-btn" onclick="goNav('category', 'Sheer', 'Sheer Elegance')" style="background:white; color:black; border:1px solid var(--primary-lila);"><span>Sheer Elegance</span></div>
        <div class="category-btn" onclick="goNav('category', 'Blackout', 'Blackout')" style="background:white; color:black; border:1px solid var(--primary-lila);"><span>Blackout</span></div>
        <div class="category-btn" onclick="goNav('category', 'Verticales', 'Verticales')" style="background:white; color:black; border:1px solid var(--primary-lila);"><span>Verticales</span></div>
    </div>

    <div id="category-view" class="page">
        <button class="btn-back" onclick="history.back()">← VOLVER</button>
        <h2 id="view-title" style="text-align:center; color: var(--primary-lila);"></h2>
        <div class="product-grid" id="product-container"></div>
    </div>
</div>

<div id="media-viewer">
    <div class="close-viewer" onclick="history.back()">&times;</div>
    <div class="viewer-body">
        <div id="touch-overlay"></div>
        <img id="full-image">
        <iframe id="video-iframe" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
    <div class="viewer-footer">
        <div id="viewer-info" style="font-weight:bold;"></div>
        <div class="dots-container" id="dots-box"></div>
    </div>
</div>

<script>
const telefono = "573108814049";
const imagenes = {
    'PanelJapones': ["https://i.postimg.cc/65LM779r/01.png", "https://i.postimg.cc/4NbWKKJQ/02.png", "https://i.postimg.cc/Dwby2pNx/Panel-Japones.png"],
    'Sheer': ["https://i.postimg.cc/jdQMWWsD/01.png", "https://i.postimg.cc/4NbWKKJK/02.png"],
    'Muebles': ["https://i.postimg.cc/fbdTvQ5Q/closet-4696557.jpg", "https://i.postimg.cc/Z5KygDMQ/467694882.png"],
    'Mobiliario': ["https://i.postimg.cc/ncnsjPpL/467725657.png"],
    'Blackout': ["https://i.postimg.cc/HsCSs0Cw/02.png"],
    'Verticales': ["https://i.postimg.cc/T1PP14tT/01.png"],
    'Videos': [{id: "btJDKdDBmnE", title: "Dual System"}, {id: "cOaMki5fR6E", title: "Video 02"}]
};

let currentList = [], currentIndex = 0, isVideoMode = false, currentCatName = "";

function goNav(view, catId = null, catName = null) {
    history.pushState({view, catId, catName}, "");
    render();
}

window.onpopstate = render;

function render() {
    const s = history.state || {view: 'home'};
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('media-viewer').style.display = 'none';
    document.getElementById('video-iframe').src = "";
    document.getElementById('video-iframe').style.display = "none";
    document.getElementById('full-image').style.display = "none";

    if (s.view === 'home') {
        document.getElementById('home').classList.add('active');
    } else if (s.view === 'submenu') {
        document.getElementById('submenu-view').classList.add('active');
    } else if (s.view === 'category') {
        document.getElementById('category-view').classList.add('active');
        loadCategory(s.catId, s.catName);
    } else if (s.view === 'viewer') {
        // SOLUCIÓN PANTALLAZO NEGRO: Si entramos al visor, aseguramos que la lista esté cargada detrás
        document.getElementById('category-view').classList.add('active');
        loadCategory(s.catId, s.catName);
        document.getElementById('media-viewer').style.display = 'flex';
        updateViewer();
    }
}

function loadCategory(id, name) {
    const container = document.getElementById('product-container');
    document.getElementById('view-title').innerText = name;
    currentCatName = name;
    container.innerHTML = "";
    isVideoMode = (id === 'Videos');
    currentList = imagenes[id] || [];
    currentList.forEach((item, i) => {
        const url = isVideoMode ? `https://img.youtube.com/vi/${item.id}/0.jpg` : item;
        const label = isVideoMode ? item.title : name + " 0" + (i+1);
        container.innerHTML += `
            <div class="product-card" onclick="openViewer(${i})">
                <div class="product-img">
                    <img src="${url}">
                    ${isVideoMode ? '<i class="fas fa-play play-icon"></i>' : ''}
                </div>
                <div style="font-weight:bold; font-size:13px; margin:5px 0;">${label}</div>
                <button class="btn-buy" onclick="event.stopPropagation(); enviarWA('${label}')">Solicitar Info</button>
            </div>`;
    });
}

function openViewer(index) {
    currentIndex = index;
    goNav('viewer', history.state.catId, history.state.catName);
}

function updateViewer() {
    const img = document.getElementById('full-image');
    const vid = document.getElementById('video-iframe');
    const info = document.getElementById('viewer-info');
    
    if (isVideoMode) {
        img.style.display = 'none';
        vid.style.display = 'block';
        vid.src = `https://www.youtube.com/embed/${currentList[currentIndex].id}?autoplay=1&rel=0&modestbranding=1&playsinline=1`;
        info.innerText = currentList[currentIndex].title;
    } else {
        vid.style.display = 'none'; vid.src = "";
        img.style.display = 'block'; img.src = currentList[currentIndex];
        info.innerText = currentCatName + " 0" + (currentIndex + 1);
    }
    
    document.getElementById('dots-box').innerHTML = currentList.map((_, i) => 
        `<div class="dot ${i===currentIndex?'active':''}"></div>`).join('');
}

// SWIPE (DEDO) - REPARADO PARA VIDEOS
let tStart = 0;
document.getElementById('touch-overlay').addEventListener('touchstart', e => { 
    tStart = e.touches[0].clientX; 
}, {passive: true});

document.getElementById('touch-overlay').addEventListener('touchend', e => {
    let tEnd = e.changedTouches[0].clientX;
    let diff = tStart - tEnd;
    if (Math.abs(diff) > 50) {
        if (diff > 0) currentIndex = (currentIndex + 1) % currentList.length;
        else currentIndex = (currentIndex - 1 + currentList.length) % currentList.length;
        updateViewer();
    }
}, {passive: true});

function enviarWA(msg) {
    window.open(`https://wa.me/${telefono}?text=${encodeURIComponent('Hola Johanna, solicito información de: ' + msg)}`, '_blank');
}

window.onload = () => { if(!history.state) history.replaceState({view:'home'}, ""); render(); };
</script>
</body>
</html>